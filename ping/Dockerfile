# version: 1.0
FROM golang:latest
# go stuff
RUN go get -u github.com/kardianos/govendor && \
go get -u -v github.com/codeskyblue/fswatch && \
go get -u github.com/sparrc/go-ping


#RUN mkdir -p /go/src/github.com/faas/ping
WORKDIR /go/src/github.com/faas/ping
ADD ./cmd/pingd/ .
#COPY . /go/src/github.com/faas/ping
EXPOSE 8080#RUN apt-get update && \
           #      apt-get -y install sudo
           #
           #RUN adduser root sudo

RUN  CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo . 
#RUN go build /go/src/github.com/faas/ping/cmd/pingd/ping.go
#RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o ping /go/src/github.com/faas/ping/cmd/pingd/ping.go
#/go/src/github.com/faas/ping
CMD ["./ping"]
#CMD ["go","run","/go/src/github.com/faas/ping/cmd/pingd/ping.go"]
#RUN echo "desc: Auto generated by fswatch [factorial] \n\